--[[
     ? This is a guide for what buildings make what items. I've kept the db tag for the buildings
     ? and items, and included their plain English names so you can know what items to expect.
	
! Bazaar of the Arts: phar_main_common_general_12 (+2 Happiness), phar_main_rare_19 (+2 Happiness, +5% Replenishment in Encamp Stance), phar_main_rare_31 (-5% Attrition, +4 Workforce), phar_main_rare_42 (Senet Game Set: +2 Siege Holdout Time, +10% Unit Experience), phar_main_rare_7 (Supporter: +2 Influence, +1 Presence For General).
     * Variant: phar_main_all_province_management_happiness_type_c_3
	
! Bronze Proving Hall: phar_main_common_equipment_axe, phar_main_common_equipment_club, phar_main_common_equipment_spear, phar_main_common_equipment_khopesh, phar_main_common_equipment_sword
     * Variant: phar_main_all_resource_production_bronze_mine_derivative_type_a_2

! Cedar Warehouse: phar_main_common_equipment_bow, phar_main_common_equipment_chariot, phar_main_common_shield_large, phar_main_common_shield_medium, phar_main_common_shield_small, phar_main_common_equipment_spear.
     * Variants: phar_map_all_resource_production_wood_mesopotamia_type_a_derivative_1, phar_map_wood_production_aegean_derivative_1, phar_map_wood_production_thrace_derivative_1, phar_map_wood_production_assuwa_derivative_1

! Grand Bazaar: phar_main_common_general_20, Avid Collector (phar_main_rare_10), Gem Merchant (phar_main_rare_13).
	* Variants: phar_main_all_resource_production_fruit_oasis_derivative_type_a_1, phar_main_irsu_resource_production_fruit_oasis_derivative_type_a_1

! House of Astrologers: phar_main_common_general_22 (Scout: +35% Line of Sight), phar_main_common_general_24 (Tracker: -10% Enemy Movement in Region), phar_main_common_general_28 (Sandals: - Prayer Movement Restoration +20%), phar_main_common_general_7 (Devoted Taskmaster: +4 Influence), phar_main_common_general_9 (Trapper: -10% Enemy Movement in Region), phar_main_rare_1 (Libu Tracker: -10% Enemy Movement Range in Region & 5% Ambush Chance).
     * Variants: phar_map_bab_province_management_influence_roads_type_a_3, phar_map_myc_province_management_roads_3

! Smugglers' Market / Smuggler's Market / Smugglers' Port / Smuggler's Port: phar_main_common_general_2 (5% rare ancillary chance), phar_main_common_general_8 (5% ancillary steal), Smuggler (phar_main_rare_12 - 35% LOS 5% ancillary steal), Saboteur (phar_main_rare_14 - Reduces enemy army movement in region), Poisoner (phar_main_rare_9 - reduces enemy army movement + bodyguard lethality.).
     * Variant: phar_main_all_resource_production_port_coast_derivative_type_a_1

! Royal Bronze Worker / Royal Bronzeworker: phar_main_common_armour_heavy, phar_main_common_armour_light, phar_main_common_armour_medium
	* Variants: phar_main_all_resource_production_modifier_bronze_3, phar_main_tausret_resource_production_modifier_bronze_3

! Visitor's Quarters - (phar_main_all_province_management_roads_3): phar_main_common_general_22 (Scout: +35% Line of Sight), phar_main_common_general_24 (Tracker: -10% Enemy Movement in Region), phar_main_common_general_28 (Sandals: - Prayer Movement Restoration +20%), phar_main_common_general_7 (Devoted Taskmaster: +4 Influence), phar_main_common_general_9 (Trapper: 10% Enemy Movement in Region), phar_main_rare_1 (Libu Tracker: -10% Enemy Movement Range in Region & 5% Ambush Chance).

! Visitor's Quarters, Damokoros' Road Infrastructure: phar_main_common_general_22 (Scout: +35% Line of Sight), phar_main_common_general_24 (Tracker: -10% Enemy Movement in Region), phar_main_common_general_28 (Sandals: - Prayer Movement Restoration +20%), phar_main_common_general_7 (Devoted Taskmaster: +4 Influence), phar_main_common_general_9 (Trapper: -10% Enemy Movement in Region), phar_main_rare_1 (Libu Tracker: -10% Enemy Movement Range in Region & 5% Ambush Chance).
     * Variants: phar_main_all_province_management_roads_3, phar_map_bab_province_management_influence_roads_type_a_3, phar_map_myc_province_management_roads_3

Champion's Hall: phar_main_common_general_11 (sucks!), phar_main_rare_15 (Duellist: +5% Ambush Defence Channce, XP for sword and khopesh units),  phar_main_rare_16 (Blind Veteran: +20% Ambush defence chance, XP for spear units), phar_main_rare_17 (Strongman - +2 Public Order, XP for axe and club units).

          * Variants listed below:
     ? phar_main_amenmesse_military_administration_unit_training_type_b_1
     ? phar_main_bay_military_administration_unit_training_type_b_1
     ? phar_main_canaan_military_administration_unit_training_type_b_1
     ? phar_main_hatti_military_administration_unit_training_type_b_1
     ? phar_main_irsu_military_administration_unit_training_type_b_1
     ? phar_main_kemet_military_administration_unit_training_type_b_1
     ? phar_main_kuru_military_administration_unit_training_type_b_1
     ? phar_main_kurunta_military_administration_unit_training_type_b_1
     ? phar_main_ramesses_military_administration_unit_training_type_b_1
     ? phar_main_seti_military_administration_unit_training_type_b_1
     ? phar_main_suppiluliuma_military_administration_unit_training_type_b_1
     ? phar_main_tausret_military_administration_unit_training_type_b_1
     ? phar_map_achean_military_administration_unit_training_type_b_1
     ? phar_map_ash_military_administration_unit_training_type_b_1
     ? phar_map_bab_military_administration_unit_training_type_b_1
     ? phar_map_elam_military_administration_unit_training_type_b_1
     ? phar_map_luwian_military_administration_unit_training_type_b_1
     ? phar_map_meso_military_administration_unit_training_type_b_1
     ? phar_map_mycenae_military_administration_unit_training_type_b_1
     ? phar_map_thracian_military_administration_unit_training_type_b_1
     ? phar_map_urartu_military_administration_unit_training_type_b_1
     ? phar_map_wilusa_military_administration_unit_training_type_b_1

]] --
--[[
Grand Temple of Amun - (phar_main_religion_cult_center_grand_temple_amun_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Anubis - (phar_main_religion_cult_center_grand_temple_anubis_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Arinna - (phar_main_religion_cult_center_grand_temple_arinna_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Asherah - (phar_main_religion_cult_center_grand_temple_asherah_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Aten - (phar_main_religion_cult_center_grand_temple_aten_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Baal - (phar_main_religion_cult_center_grand_temple_baal_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of El - (phar_main_religion_cult_center_grand_temple_el_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Horus - (phar_main_religion_cult_center_grand_temple_horus_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Isis - (phar_main_religion_cult_center_grand_temple_isis_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Kumarbi - (phar_main_religion_cult_center_grand_temple_kumarbi_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Kurunta - (phar_main_religion_cult_center_grand_temple_kurunta_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Moloch - (phar_main_religion_cult_center_grand_temple_moloch_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Osiris - (phar_main_religion_cult_center_grand_temple_osiris_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Ptah - (phar_main_religion_cult_center_grand_temple_ptah_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Ra - (phar_main_religion_cult_center_grand_temple_ra_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Set - (phar_main_religion_cult_center_grand_temple_set_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Shaushka - (phar_main_religion_cult_center_grand_temple_shaushka_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Tarhunz - (phar_main_religion_cult_center_grand_temple_tarhunz_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Thoth - (phar_main_religion_cult_center_grand_temple_thoth_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Yamm - (phar_main_religion_cult_center_grand_temple_yamm_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Aphrodite - (phar_map_religion_cult_center_grand_temple_aphrodite_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Apollo - (phar_map_religion_cult_center_grand_temple_apollo_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Ares - (phar_map_religion_cult_center_grand_temple_ares_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Ashur - (phar_map_religion_cult_center_grand_temple_ashur_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Inshushinak - (phar_map_religion_cult_center_grand_temple_inshushinak_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Ishtar - (phar_map_religion_cult_center_grand_temple_ishtar_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Marduk - (phar_map_religion_cult_center_grand_temple_marduk_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Ninurta - (phar_map_religion_cult_center_grand_temple_ninurta_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Poseidon - (phar_map_religion_cult_center_grand_temple_poseidon_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).
Grand Temple of Zeus - (phar_map_religion_cult_center_grand_temple_zeus_1): Small Altar (phar_main_common_general_15 - +1 prayer duration).

? Native Barracks (Major Settlement) - (phar_main_all_military_native_type_a_kush_4 as phar_main_all_military_native_type_a_all_4_title): phar_main_rare_4
? Native Barracks (Major Settlement) - (phar_main_all_military_native_type_a_nubia_4 as phar_main_all_military_native_type_a_all_4_title): phar_main_rare_4
? Native Barracks (Major Settlement) - (phar_map_all_military_native_type_a_haltamti_4): phar_main_rare_3, phar_main_rare_5
? Native Barracks (Major Settlement) - (phar_map_all_military_native_type_a_mat_assur_4): phar_main_rare_3, phar_main_rare_5
? Native Barracks (Major Settlement) - (phar_map_all_military_native_type_a_mat_tamti_4): phar_main_rare_3, phar_main_rare_5

]] --
--[[

Surgeon's Practice: phar_main_rare_2: +5 Rel with Kemet factions, 5% Cmp Replen. phar_main_rare_6: +5 Relationship with Babylonian factions, 5% Cmp Replen. phar_sea_rare_8: -40% Bodyguard Fatigue Buildup, phar_main_common_general_10: -20% General Fatigue Buildup,
	* Variant: phar_main_all_province_management_growth_type_a_3

Oxen Cart Assembly:  phar_sea_rare_9, phar_main_common_general_22 (Scout: +35% Line of Sight), phar_main_common_general_24 (Tracker: -10% Enemy Movement in Region), phar_main_common_general_28 (Sandals: - Prayer Movement Restoration +20%), phar_main_common_general_7 (Devoted Taskmaster: +4 Influence), phar_main_common_general_9 (Trapper: 10% Enemy Movement in Region), phar_main_rare_1 (Libu Tracker: -10% Enemy Movement Range in Region & 5% Ambush Chance).
     * Variant: phar_sea_peleset_province_management_movement_production_boost_3

Granary, Provisioning Headquarters: phar_main_common_general_29 (Mining Hammer: -1 Enemy Siege Holdout Time, -10% Bronze Upkeep Cost), phar_main_common_general_22 (Scout: +35% Line of Sight).
     * Variants: phar_main_all_resource_production_modifier_food_3, phar_main_tausret_resource_production_modifier_food_3

Palace of Pleasures: phar_main_rare_6 (Babylonian Healer - Encamp Replenishment & +3 Babylonian Relations), phar_sea_common_1 (+5 Labour Growth), phar_sea_rare_8 (40% Bodyguard Fatigue Reduction).
     * Variants: phar_main_all_province_management_growth_type_a_3, phar_map_bab_province_management_happiness_growth_type_a_3

Pottery Markets: phar_main_rare_37 (Minoan Pottery: -10% to Upkeep of Native Units, -10% to Cost of All Outposts in Province).
     * Variant: phar_main_all_landmark_production_boost_tarsus_1

Royal Goldsmith: phar_main_rare_24 (Golden Scarab: -10% to Gold Recruitment and Upkeep Cost), phar_main_rare_28 (Ritual Ankh: -10% to Recruitment and Upkeep for Native Units).
     * Variants: phar_main_all_resource_production_modifier_gold_3, phar_main_tausret_resource_production_modifier_gold_3

Royal Fishery: phar_main_rare_27 (Dried Fish: -25% Deep Sea Attrition, -10% Army Food Upkeep), phar_main_rare_40 (Heavy Ropes: -1 Workforce Cost for Military Structures, -1 Turn to Enemy Siege Holdout Time), phar_sea_common_2 (Royal Fishery: +20% to Campaign Movement Range at Sea).
     * Variant: phar_main_all_resource_production_port_coast_2

? These are all workforce cost reduction items for construction
! Royal Jeweller: phar_main_rare_30 (Nubian Jewelry: phar_main_rare_30 (Nubian Jewelry: -1 to idle workforce cost of municipal complex buildings, General aura size), phar_main_rare_43 (ranged upkeep reduction), phar_main_rare_49 (workforce cost reduction for resource production buildings.).
     * Variants: phar_main_irsu_resource_production_gold_mine_derivative_type_b_1, phar_main_all_resource_production_gold_mine_derivative_type_b_1

! Stone Carvers' District: Avid Collector (phar_main_rare_10), phar_main_rare_32 (Mining Hammer:  -1 Siege Holdout Time, -10% Bronze Upkeep Cost), phar_main_rare_7 (Supporter: +2 Influence, +1 Presence For General), phar_main_rare_42 (Senet Game Set: +2 Siege Holdout Time, +10% Unit Experience).
     * Variants: phar_main_all_resource_production_stone_mine_derivative_type_a_1, phar_main_irsu_resource_production_stone_mine_derivative_type_a_1

Translators Quarters - (phar_main_all_province_management_main_building_poc_happiness_boost_1): phar_main_common_general__25, phar_main_common_general__26, phar_main_common_general__27, Diplomat (phar_main_rare_11).

Wisdom Codecs: Field Advisor (phar_main_common_general_16 - no effect in data.pack), Wise Nobleman (phar_main_rare_18 - +2 influence, XP for ranged infantry) Soothsayer (phar_main_rare_8 - subterfuge/governance stat).
     * Variant: phar_main_all_province_management_main_building_poc_legitimacy_influence_boost_3

Wine Market: phar_main_common_general_12, phar_main_rare_19, phar_main_rare_31, phar_main_rare_42 (Senet Game Set: +2 Siege Holdout Time, phar_main_rare_7 (Supporter: +2 Influence, +1 Presence For General).
     * Variant: phar_main_ram_province_management_production_boost_happiness_3

]] --

out("anc_mod: INIT.")
local ancillary_master_list = {
     -- ["building_id"] = {"anc1","anc2"}

     -- Bronze Proving Hall
     ["phar_main_all_resource_production_bronze_mine_derivative_type_a_2"] = {
          "phar_main_common_equipment_axe", "phar_main_common_equipment_club", "phar_main_common_equipment_spear", "phar_main_common_equipment_khopesh",
          "phar_main_common_equipment_sword"
     },

     -- Wisdom Codices
     ["phar_main_all_province_management_main_building_poc_legitimacy_influence_boost_3"] = {"phar_main_rare_8"},

     -- Translators Quarters
     ["phar_main_all_province_management_main_building_poc_happiness_boost_1"] = {
          "phar_main_common_general_25", "phar_main_common_general_26", "phar_main_common_general_27", "phar_main_rare_11"
     },

     -- Tarsus Pottery Landmark
     ["phar_main_all_landmark_production_boost_tarsus_1"] = {"phar_main_rare_37"},

     -- Healer / Palace of Pleasure Buildings
     ["phar_main_all_province_management_growth_type_a_3"] = {"phar_main_rare_2", "phar_main_rare_6", "phar_sea_common_1", "phar_sea_rare_8"},
     ["phar_map_bab_province_management_happiness_growth_type_a_3"] = {"phar_main_rare_6", "phar_sea_common_1", "phar_sea_rare_8"},

     -- Royal Goldsmiths
     ["phar_main_all_resource_production_modifier_gold_3"] = {"phar_main_rare_24", "phar_main_rare_28"},
     ["phar_main_tausret_resource_production_modifier_gold_3"] = {"phar_main_rare_24", "phar_main_rare_28"},

     -- Smuggler's Port
     ["phar_main_all_resource_production_port_coast_derivative_type_a_1"] = {
          "phar_main_common_general_2", "phar_main_common_general_8", "phar_main_rare_12", "phar_main_rare_14", "phar_main_rare_9"
     },

     -- Stonecarver's District
     ["phar_main_all_resource_production_stone_mine_derivative_type_a_1"] = {"phar_main_rare_32", "phar_main_rare_10", "phar_main_rare_7", "phar_main_rare_42"},
     ["phar_main_irsu_resource_production_stone_mine_derivative_type_a_1"] = {"phar_main_rare_32", "phar_main_rare_10", "phar_main_rare_7", "phar_main_rare_42"},

     -- Visitor's Quarters / Oxen Cart Assembly
     ["phar_main_all_province_management_roads_3"] = {
          "phar_main_common_general_22", "phar_main_common_general_24", "phar_main_common_general_28", "phar_main_common_general_7", "phar_main_common_general_9",
          "phar_main_rare_1"
     },
     ["phar_map_bab_province_management_influence_roads_type_a_3"] = {
          "phar_main_common_general_22", "phar_main_common_general_24", "phar_main_common_general_28", "phar_main_common_general_7", "phar_main_common_general_9",
          "phar_main_rare_1"
     },
     ["phar_map_myc_province_management_roads_3"] = {
          "phar_main_common_general_22", "phar_main_common_general_24", "phar_main_common_general_28", "phar_main_common_general_7", "phar_main_common_general_9",
          "phar_main_rare_1"
     },
     ["phar_sea_peleset_province_management_movement_production_boost_3"] = {
          "phar_sea_rare_9", "phar_main_common_general_22", "phar_main_common_general_24", "phar_main_common_general_28", "phar_main_common_general_7",
          "phar_main_common_general_9", "phar_main_rare_1"
     },

     -- Royal Jeweller
     ["phar_main_all_resource_production_gold_mine_derivative_type_b_1"] = {"phar_main_rare_30", "phar_main_rare_38", "phar_main_rare_49"},
     ["phar_main_irsu_resource_production_gold_mine_derivative_type_b_1"] = {"phar_main_rare_30", "phar_main_rare_38", "phar_main_rare_49"},

     -- Drinking Establishments
     ["phar_main_all_province_management_happiness_type_c_3"] = {
          "phar_main_common_general_12", "phar_main_rare_19", "phar_main_rare_31", "phar_main_rare_42", "phar_main_rare_7"
     },
     ["phar_main_ram_province_management_production_boost_happiness_3"] = {
          "phar_main_common_general_12", "phar_main_rare_19", "phar_main_rare_31", "phar_main_rare_42", "phar_main_rare_7"
     },

     -- Granary
     ["phar_main_all_resource_production_modifier_food_3"] = {"phar_main_common_general_29", "phar_main_common_general_22"},
     ["phar_main_tausret_resource_production_modifier_food_3"] = {"phar_main_common_general_29", "phar_main_common_general_22"},

     -- Bazaars
     ["phar_main_all_resource_production_fruit_oasis_derivative_type_a_1"] = {"phar_main_rare_10", "phar_main_rare_13"},
     ["phar_main_irsu_resource_production_fruit_oasis_derivative_type_a_1"] = {"phar_main_rare_10", "phar_main_rare_13"},

     -- Southern Natives
     ["phar_main_all_military_native_type_a_kush_4"] = {"phar_main_common_general_12"},
     ["phar_main_all_military_native_type_a_nubia_4"] = {"phar_main_rare_4"},

     -- Meso Natives
     ["phar_map_all_military_native_type_a_haltamti_4"] = {"phar_main_rare_3"},
     ["phar_map_all_military_native_type_a_mat_assur_4"] = {"phar_main_rare_3"},
     ["phar_map_all_military_native_type_a_mat_tamti_4"] = {"phar_main_rare_3"},

     -- Cult Centres
     ["phar_main_religion_cult_center_grand_temple_amun_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_anubis_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_arinna_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_asherah_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_aten_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_baal_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_el_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_horus_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_isis_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_kumarbi_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_kurunta_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_moloch_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_osiris_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_ptah_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_ra_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_set_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_shaushka_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_tarhunz_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_thoth_1"] = {"phar_main_common_general_15"},
     ["phar_main_religion_cult_center_grand_temple_yamm_1"] = {"phar_main_common_general_15"},
     ["phar_map_religion_cult_center_grand_temple_aphrodite_1"] = {"phar_main_common_general_15"},
     ["phar_map_religion_cult_center_grand_temple_apollo_1"] = {"phar_main_common_general_15"},
     ["phar_map_religion_cult_center_grand_temple_ares_1"] = {"phar_main_common_general_15"},
     ["phar_map_religion_cult_center_grand_temple_ashur_1"] = {"phar_main_common_general_15"},
     ["phar_map_religion_cult_center_grand_temple_inshushinak_1"] = {"phar_main_common_general_15"},
     ["phar_map_religion_cult_center_grand_temple_ishtar_1"] = {"phar_main_common_general_15"},
     ["phar_map_religion_cult_center_grand_temple_marduk_1"] = {"phar_main_common_general_15"},
     ["phar_map_religion_cult_center_grand_temple_ninurta_1"] = {"phar_main_common_general_15"},
     ["phar_map_religion_cult_center_grand_temple_poseidon_1"] = {"phar_main_common_general_15"},
     ["phar_map_religion_cult_center_grand_temple_zeus_1"] = {"phar_main_common_general_15"},

     -- Royal Bronzeworks
     ["phar_main_all_resource_production_modifier_bronze_3"] = {"phar_main_common_armour_heavy", "phar_main_common_armour_medium"},
     ["phar_main_tausret_resource_production_modifier_bronze_3"] = {"phar_main_common_armour_heavy", "phar_main_common_armour_medium"},

     -- Champion's Hall
     ["phar_main_amenmesse_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_main_bay_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_main_canaan_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_main_hatti_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_main_irsu_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_main_kemet_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_main_kuru_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_main_kurunta_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_main_ramesses_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_main_seti_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_main_suppiluliuma_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_main_tausret_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_map_achean_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_map_ash_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_map_bab_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_map_elam_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_map_luwian_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_map_meso_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_map_mycenae_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_map_thracian_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_map_urartu_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},
     ["phar_map_wilusa_military_administration_unit_training_type_b_1"] = {"phar_main_rare_15", "phar_main_rare_16", "phar_main_rare_17"},

     -- Woodcutters Districts
     ["phar_main_all_resource_production_wood_canaan_type_a_derivative_1"] = {
          "phar_main_common_equipment_bow", "phar_main_common_equipment_chariot", "phar_main_common_shield_large", "phar_main_common_shield_medium",
          "phar_main_common_equipment_spear"
     },
     ["phar_main_all_resource_production_wood_hatti_derivative_2"] = {
          "phar_main_common_equipment_bow", "phar_main_common_equipment_chariot", "phar_main_common_shield_large", "phar_main_common_shield_medium",
          "phar_main_common_equipment_spear"
     },

     -- Cedar Warehouse
     ["phar_map_all_resource_production_wood_mesopotamia_type_a_derivative_1"] = {
          "phar_main_common_equipment_bow", "phar_main_common_equipment_chariot", "phar_main_common_shield_large", "phar_main_common_shield_medium",
          "phar_main_common_equipment_spear"
     },
     ["phar_map_wood_production_aegean_derivative_1"] = {
          "phar_main_common_equipment_bow", "phar_main_common_equipment_chariot", "phar_main_common_shield_large", "phar_main_common_shield_medium",
          "phar_main_common_equipment_spear"
     },
     ["phar_map_wood_production_assuwa_derivative_1"] = {
          "phar_main_common_equipment_bow", "phar_main_common_equipment_chariot", "phar_main_common_shield_large", "phar_main_common_shield_medium",
          "phar_main_common_equipment_spear"
     },
     ["phar_map_wood_production_thrace_derivative_1"] = {
          "phar_main_common_equipment_bow", "phar_main_common_equipment_chariot", "phar_main_common_shield_large", "phar_main_common_shield_medium",
          "phar_main_common_equipment_spear"
     },

     -- Royal Fishery
     ["phar_main_all_resource_production_port_coast_2"] = {"phar_main_rare_27", "phar_main_rare_40", "phar_sea_common_2"}
}

local building_spawn_chance = {
     -- ["building_id"] = number
     ["phar_main_all_resource_production_bronze_mine_derivative_type_a_2"] = 3,
     ["phar_main_all_resource_production_modifier_bronze_3"] = 3,
     ["phar_main_tausret_resource_production_modifier_bronze_3"] = 3,
     ["phar_main_amenmesse_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_bay_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_canaan_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_hatti_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_irsu_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_kemet_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_kuru_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_kurunta_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_ramesses_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_seti_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_suppiluliuma_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_tausret_military_administration_unit_training_type_b_1"] = 3,
     ["phar_map_achean_military_administration_unit_training_type_b_1"] = 3,
     ["phar_map_ash_military_administration_unit_training_type_b_1"] = 3,
     ["phar_map_bab_military_administration_unit_training_type_b_1"] = 3,
     ["phar_map_elam_military_administration_unit_training_type_b_1"] = 3,
     ["phar_map_luwian_military_administration_unit_training_type_b_1"] = 3,
     ["phar_map_meso_military_administration_unit_training_type_b_1"] = 3,
     ["phar_map_mycenae_military_administration_unit_training_type_b_1"] = 3,
     ["phar_map_thracian_military_administration_unit_training_type_b_1"] = 3,
     ["phar_map_urartu_military_administration_unit_training_type_b_1"] = 3,
     ["phar_map_wilusa_military_administration_unit_training_type_b_1"] = 3,
     ["phar_main_all_resource_production_wood_canaan_type_a_derivative_1"] = 3,
     ["phar_main_all_resource_production_wood_hatti_derivative_2"] = 2,
     ["phar_map_all_resource_production_wood_mesopotamia_type_a_derivative_1"] = 3,
     ["phar_map_wood_production_aegean_derivative_1"] = 3,
     ["phar_map_wood_production_assuwa_derivative_1"] = 3,
     ["phar_map_wood_production_thrace_derivative_1"] = 3,
     ["phar_main_all_province_management_main_building_poc_legitimacy_influence_boost_3"] = 3,
     ["phar_main_all_province_management_main_building_poc_happiness_boost_1"] = 3,
     ["phar_main_all_province_management_growth_type_a_3"] = 3,
     ["phar_map_bab_province_management_happiness_growth_type_a_3"] = 3,
     ["phar_main_all_resource_production_port_coast_2"] = 3,
     ["phar_main_all_resource_production_modifier_gold_3"] = 3,
     ["phar_main_tausret_resource_production_modifier_gold_3"] = 3,
     ["phar_main_all_resource_production_port_coast_derivative_type_a_1"] = 3,
     ["phar_main_all_resource_production_stone_mine_derivative_type_a_1"] = 3,
     ["phar_main_irsu_resource_production_stone_mine_derivative_type_a_1"] = 3,
     ["phar_main_all_province_management_roads_3"] = 3,
     ["phar_map_bab_province_management_influence_roads_type_a_3"] = 3,
     ["phar_map_myc_province_management_roads_3"] = 3,
     ["phar_sea_peleset_province_management_movement_production_boost_3"] = 3,
     ["phar_main_all_resource_production_gold_mine_derivative_type_b_1"] = 3,
     ["phar_main_irsu_resource_production_gold_mine_derivative_type_b_1"] = 3,
     ["phar_main_all_province_management_happiness_type_c_3"] = 3,
     ["phar_main_ram_province_management_production_boost_happiness_3"] = 3,
     ["phar_main_all_resource_production_modifier_food_3"] = 3,
     ["phar_main_tausret_resource_production_modifier_food_3"] = 3,
     ["phar_main_all_military_native_type_a_kush_4"] = 3,
     ["phar_main_all_military_native_type_a_nubia_4"] = 3,
     ["phar_map_all_military_native_type_a_haltamti_4"] = 3,
     ["phar_map_all_military_native_type_a_mat_assur_4"] = 3,
     ["phar_map_all_military_native_type_a_mat_tamti_4"] = 3,
     ["phar_main_all_resource_production_fruit_oasis_derivative_type_a_1"] = 5,
     ["phar_main_irsu_resource_production_fruit_oasis_derivative_type_a_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_amun_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_anubis_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_arinna_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_asherah_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_aten_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_baal_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_el_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_horus_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_isis_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_kumarbi_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_kurunta_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_moloch_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_osiris_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_ptah_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_ra_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_set_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_shaushka_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_tarhunz_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_thoth_1"] = 5,
     ["phar_main_religion_cult_center_grand_temple_yamm_1"] = 5,
     ["phar_map_religion_cult_center_grand_temple_aphrodite_1"] = 5,
     ["phar_map_religion_cult_center_grand_temple_apollo_1"] = 5,
     ["phar_map_religion_cult_center_grand_temple_ares_1"] = 5,
     ["phar_map_religion_cult_center_grand_temple_ashur_1"] = 5,
     ["phar_map_religion_cult_center_grand_temple_inshushinak_1"] = 5,
     ["phar_map_religion_cult_center_grand_temple_ishtar_1"] = 5,
     ["phar_map_religion_cult_center_grand_temple_marduk_1"] = 5,
     ["phar_map_religion_cult_center_grand_temple_ninurta_1"] = 5,
     ["phar_map_religion_cult_center_grand_temple_poseidon_1"] = 5,
     ["phar_map_religion_cult_center_grand_temple_zeus_1"] = 5,
     ["phar_main_all_landmark_production_boost_tarsus_1"] = 8
}

core:add_listener("forge_detect", "FactionTurnStart", function(context)
     out("anc_mod: INIT2.")
     for building, anc_list in pairs(ancillary_master_list) do
          if context:faction():building_exists(building) then
               out("anc_mod: " .. building .. " detected for " .. context:faction():name())
               return true
          end
     end
     out("anc_mod: " .. context:faction():name() .. " has no tracked buildings.")
     return false
end, function(context)
     out("anc_mod: Faction has at least one tracked building, but we need to check for others.")
     local region_list = context:faction():region_list()

     for building, anc_list in pairs(ancillary_master_list) do
          out("anc_mod: checks for building " .. building)
          local chances_to_spawn = return_building_number(building, region_list)
          spawn_ancillaries(context:faction():name(), chances_to_spawn, anc_list, building)
     end
end, true)

function return_building_number(building_key, region_list)
     out("anc_mod: func called to find number of " .. building_key)
     local number_to_return = 0
     for i = 0, region_list:num_items() - 1 do
          this_region = region_list:item_at(i)

          if this_region:building_exists(building_key) then
               -- out("anc_mod: "..building_key.."detected in region")
               local this_slot_list = this_region:slot_list()

               for j = 0, this_slot_list:num_items() - 1 do
                    local this_slot = this_slot_list:item_at(j)

                    if this_slot:has_building() and this_slot:building():name() == building_key then
                         out("anc_mod: " .. building_key .. "detected in slot")
                         number_to_return = number_to_return + 1
                    end
               end
          end
     end
     out("anc_mod: returning value of " .. number_to_return)
     return number_to_return
end

function spawn_ancillaries(faction, chances, ancillary_list, building)
     out("anc_mod: func called to spawn ancillaries")
     if chances == 0 then
          out("anc_mod: no buildings, no chance - ending script")
          return
     end
     local dice_roll = building_spawn_chance[building]
     out("anc_mod: func called to spawn ancillaries2")
     out("anc_mod: func called to spawn ancillaries2" .. dice_roll)

     for i = 1, chances do
          if cm:model():random_percent(dice_roll) then
               local random_number = cm:model():random_int(1, #ancillary_list)
               out("anc_mod: Awarding ancillary: " .. ancillary_list[random_number])
               cm:add_ancillary_to_faction(faction, ancillary_list[random_number], true)
          end
     end
end
